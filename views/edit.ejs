<% layout('layout') %>
<div class="card">
    <h2 style="margin-top:0;">Edit Data Analisis</h2>
    <form action="/update/<%= project.id %>" method="POST">
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 25px;">
            <div>
                <label style="display:block; font-size: 0.75rem; font-weight:700; color: #64748b; margin-bottom:5px;">NAMA PROYEK</label>
                <input type="text" name="projectName" value="<%= project.name %>" required style="width:100%; padding:10px; border:1px solid #cbd5e1; border-radius:4px;">
            </div>
            <div>
                <label style="display:block; font-size: 0.75rem; font-weight:700; color: #64748b; margin-bottom:5px;">MODE</label>
                <select name="mode" style="width:100%; padding:10px; border:1px solid #cbd5e1; border-radius:4px;">
                    <option value="actual" <%= project.mode === 'actual' ? 'selected' : '' %>>Aktual</option>
                    <option value="target" <%= project.mode === 'target' ? 'selected' : '' %>>Target</option>
                </select>
            </div>
        </div>

        <div style="margin-bottom: 25px;">
            <label style="display:block; font-size: 0.75rem; font-weight:700; color: #64748b; margin-bottom:5px;">TAKT TIME (S)</label>
            <input type="number" name="taktTime" step="0.001" value="<%= project.takt %>" style="width:100%; padding:10px; border:1px solid #cbd5e1; border-radius:4px;">
        </div>

        <h3 style="font-size: 1rem; border-top: 1px solid #f1f5f9; padding-top: 20px;">Detail Stasiun Kerja</h3>
        <% project.Stations.forEach((s, index) => { %>
            <div style="display: grid; grid-template-columns: 40px 3fr 1fr; gap: 15px; margin-bottom: 10px; align-items: center;">
                <span style="font-weight:700; color:#94a3b8;"><%= index + 1 %></span>
                <input type="hidden" name="s_id[]" value="<%= s.id %>">
                <input type="text" name="s_name[]" value="<%= s.name %>" required style="padding:8px; border:1px solid #cbd5e1; border-radius:4px;">
                <input type="number" name="s_time[]" step="0.001" value="<%= s.time %>" required style="padding:8px; border:1px solid #cbd5e1; border-radius:4px;">
            </div>
        <% }) %>

        <div style="margin-top: 30px; display: flex; gap: 10px;">
            <button type="submit" style="flex: 1; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 4px; font-weight: 700; cursor: pointer;">SIMPAN PERUBAHAN</button>
            <a href="/" style="flex: 1; text-align: center; background: #f1f5f9; color: #475569; text-decoration: none; padding: 12px; border-radius: 4px; font-weight: 700; border: 1px solid #cbd5e1;">BATAL</a>
        </div>
    </form>
</div>
